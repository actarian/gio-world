!function(){"use strict";function t(t,e,n,o){this.target=t||document,this.downCallback=e||function(t){console.log("DragListener.downCallback not setted",t)},this.moveCallback=n||function(t){console.log("DragListener.moveCallback not setted",t)},this.upCallback=o||function(t){console.log("DragListener.upCallback not setted",t)},this.dragging=!1,this.init()}t.prototype={init:function(){this.onMouseDown=this.onMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.target.addEventListener("mousedown",this.onMouseDown,!1),this.target.addEventListener("touchstart",this.onTouchStart,!1)},onDown:function(t){this.down=t,this.strength={x:0,y:0},this.distance=this.distance||{x:0,y:0},this.speed={x:0,y:0},this.downCallback(this)},onDrag:function(t){this.dragging=!0;var e=this.target,n={x:t.x-this.down.x,y:t.y-this.down.y},o={x:n.x/window.innerWidth*2,y:n.y/window.innerHeight*2},i={x:this.speed.x+.1*(o.x-this.strength.x),y:this.speed.y+.1*(o.y-this.strength.y)};this.position=t,this.distance=n,this.strength=o,this.speed=i,this.moveCallback({position:t,distance:n,strength:o,speed:i,target:e})},onUp:function(){this.dragging=!1,this.upCallback(this)},onMouseDown:function(t){this.target.removeEventListener("touchstart",this.onTouchStart),this.onDown({x:t.clientX,y:t.clientY}),this.addMouseListeners()},onMouseMove:function(t){this.onDrag({x:t.clientX,y:t.clientY})},onMouseUp:function(t){this.removeMouseListeners(),this.onDrag({x:t.clientX,y:t.clientY}),this.onUp()},onTouchStart:function(t){this.target.removeEventListener("mousedown",this.onMouseDown),1<t.touches.length&&(t.preventDefault(),this.onDown({x:t.touches[0].pageX,y:t.touches[0].pageY}),this.addTouchListeners())},onTouchMove:function(t){0<t.touches.length&&(t.preventDefault(),this.onDrag({x:t.touches[0].pageX,y:t.touches[0].pageY}))},onTouchEnd:function(t){this.removeTouchListeners(),this.onDrag(this.position),this.onUp()},addMouseListeners:function(){document.addEventListener("mousemove",this.onMouseMove,!1),document.addEventListener("mouseup",this.onMouseUp,!1)},addTouchListeners:function(){document.addEventListener("touchend",this.onTouchEnd,!1),document.addEventListener("touchmove",this.onTouchMove,!1)},removeMouseListeners:function(){document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp)},removeTouchListeners:function(){document.removeEventListener("touchend",this.onTouchEnd),document.removeEventListener("touchmove",this.onTouchMove)}},window.DragListener=t}(),function(){"use strict";var L,R=document.querySelector(".section-world > .title"),b=document.querySelector(".section-world > .shadow"),C=document.querySelector(".section-world > .canvas"),t=C.getAttribute("texture"),e=new THREE.TextureLoader;e.crossOrigin="",e.load(t,function(t){L=t,function(){document.querySelector(".section-world").setAttribute("class","section-world init");var s=[[43.9096538,12.8399805],[41.8519772,12.2347364],[51.5287718,-.2416791],[55.6713812,12.4537393],[40.6976637,-74.1197623],[19.3911668,-99.4238221],[39.9390731,116.11726],[31.2243084,120.9162376]],o={x:0,y:0},n={x:0,y:0},e=new THREE.WebGLRenderer({alpha:!0,antialias:!0});e.shadowMap.enabled=!0,e.setSize(window.innerWidth,window.innerHeight),C.appendChild(e.domElement);var i=new THREE.Scene;i.fog=new THREE.FogExp2(0,.1);var r=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,.01,100);r.position.set(0,1,2),r.up=new THREE.Vector3(0,0,-1),r.lookAt(new THREE.Vector3(0,0,0));var a,t=new THREE.AmbientLight(2236962);i.add(t),(a=new THREE.DirectionalLight(14737632,.8)).position.set(0,2,.5),a.castShadow=!0,a.shadowCameraVisible=!0,a.shadowMapWidth=a.shadowMapHeight=2048,i.add(a);var h=new THREE.DirectionalLight(14737632,.4);h.position.set(0,-2,0),i.add(h);var d=new THREE.Vector3(0,0,1);THREE.Euler.prototype.add=function(t){return this.set(this.x+t.x,this.y+t.y,this.z+t.z,this.order),this};var c=new THREE.Euler(0,1.2*Math.PI,0,"XYZ"),u=new THREE.Euler(0,0,0,"XYZ"),l=new THREE.Euler(0,0,0,"XYZ"),w=new THREE.Euler(0,0,0,"XYZ"),E=(v=i,p=c,m=L,T=new THREE.SphereGeometry(.5,48,48),y=new THREE.MeshStandardMaterial({color:"#fff",transparent:!0,opacity:.85,roughness:.65,metalness:.6,map:m}),f=new THREE.Mesh(T,y),f.castShadow=!0,f.receiveShadow=!1,f.rotation.set(p.x,p.y,p.z),v.add(f),f),g=function(t){var e=new THREE.CanvasTexture(function(){var t=document.createElement("canvas");t.width=128,t.height=128;var e=t.getContext("2d"),n=e.createRadialGradient(t.width/2,t.height/2,0,t.width/2,t.height/2,t.width/2);return n.addColorStop(0,"rgba(255,255,255,1)"),n.addColorStop(.2,"rgba(255,255,255,1)"),n.addColorStop(.22,"rgba(255,255,255,.2)"),n.addColorStop(1,"rgba(255,255,255,0)"),e.fillStyle=n,e.fillRect(0,0,t.width,t.height),t}()),o=new THREE.Geometry,n=new THREE.PointsMaterial({size:.07,map:e,vertexColors:THREE.VertexColors,blending:THREE.AdditiveBlending,depthTest:!1,transparent:!0}),i=new THREE.Points(o,n);s.map(function(t){return e=t[0],n=t[1],o=.5,i=(90-e)*(Math.PI/180),s=(n+180)*(Math.PI/180),r=-o*Math.sin(i)*Math.cos(s),a=o*Math.sin(i)*Math.sin(s),h=o*Math.cos(i),new THREE.Vector3(r,h,a);var e,n,o,i,s,r,a,h}).forEach(function(t,e){var n=new THREE.Vector3;n.x=t.x,n.y=t.y,n.z=t.z,o.vertices.push(n),o.colors.push(new THREE.Color(0,0,0))});return o.mergeVertices(),o.verticesNeedUpdate=!0,i.geometry=o,t.add(i),i}(E);var v,p,m,T,y,f;window.addEventListener("resize",x,!1),document.addEventListener("mousemove",function(t){var e=window.innerWidth/2,n=window.innerHeight/2;o={x:(t.clientX-e)/e,y:(t.clientY-n)/n}},!1);var M=new DragListener(C,function(t){l.copy(u)},function(t){u.copy(l).add(new THREE.Euler(0,Math.PI*t.strength.x,0,"XYZ")),w.set(0,0,0,"XYZ")},function(t){w.set(0,Math.PI*t.speed.x,0,"XYZ")});function x(){var t={width:0,height:0,aspect:0};t.width=C.offsetWidth,TweenLite.set(C,{height:.6*C.offsetWidth}),t.height=C.offsetHeight,t.aspect=t.width/t.height,e&&e.setSize(t.width,t.height),r&&(r.aspect=t.aspect,r.updateProjectionMatrix())}function H(t){M.dragging||(c.y+=w.y,w.y+=(.002-w.y)/50),E.rotation.copy(c).add(u),g.geometry.vertices.forEach(function(t,e){var n=E.localToWorld(t.clone()),o=n.distanceTo(d),i=5*Math.max(0,Math.min(1,1-o));g.geometry.colors[e]=new THREE.Color(i,i,i),g.geometry.colorsNeedUpdate=!0}),e.render(i,r),function(){n.x+=(o.x-n.x)/8,n.y+=(o.y-n.y)/8;var t={x:.5*-n.x-50,y:.5*-n.y-50};TweenLite.set(R,{transform:"translateX("+t.x+"%) translateY("+t.y+"%)"});var e={x:3*-n.x-50,y:3*-n.y-50};TweenLite.set(b,{transform:"translateX("+e.x+"%) translateY("+e.y+"%)"}),a.position.set(.3*n.x,2+.3*n.y,.5),h.position.set(.3*n.x,.3*n.y-2,0)}()}(function(){var n=new THREE.Clock;function o(t){var e=n.getDelta();H(e),window.requestAnimationFrame(o)}o()})(),x()}()})}();
//# sourceMappingURL=world.min.js.map
