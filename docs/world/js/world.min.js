!function(){"use strict";function e(e,t,n,o){this.target=e||document,this.downCallback=t||function(e){console.log("DragListener.downCallback not setted",e)},this.moveCallback=n||function(e){console.log("DragListener.moveCallback not setted",e)},this.upCallback=o||function(e){console.log("DragListener.upCallback not setted",e)},this.dragging=!1,this.init()}e.prototype={init:function(){this.onMouseDown=this.onMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.target.addEventListener("mousedown",this.onMouseDown,!1),this.target.addEventListener("touchstart",this.onTouchStart,!1)},onDown:function(e){this.down=e,this.strength={x:0,y:0},this.distance=this.distance||{x:0,y:0},this.speed={x:0,y:0},this.downCallback(this)},onDrag:function(e){this.dragging=!0;var t=this.target,n={x:e.x-this.down.x,y:e.y-this.down.y},o={x:n.x/window.innerWidth*2,y:n.y/window.innerHeight*2},i={x:this.speed.x+.1*(o.x-this.strength.x),y:this.speed.y+.1*(o.y-this.strength.y)};this.position=e,this.distance=n,this.strength=o,this.speed=i,this.moveCallback({position:e,distance:n,strength:o,speed:i,target:t})},onUp:function(){this.dragging=!1,this.upCallback(this)},onMouseDown:function(e){this.target.removeEventListener("touchstart",this.onTouchStart),this.onDown({x:e.clientX,y:e.clientY}),this.addMouseListeners()},onMouseMove:function(e){this.onDrag({x:e.clientX,y:e.clientY})},onMouseUp:function(e){this.removeMouseListeners(),this.onDrag({x:e.clientX,y:e.clientY}),this.onUp()},onTouchStart:function(e){this.target.removeEventListener("mousedown",this.onMouseDown),1<e.touches.length&&(e.preventDefault(),this.onDown({x:e.touches[0].pageX,y:e.touches[0].pageY}),this.addTouchListeners())},onTouchMove:function(e){0<e.touches.length&&(e.preventDefault(),this.onDrag({x:e.touches[0].pageX,y:e.touches[0].pageY}))},onTouchEnd:function(e){this.removeTouchListeners(),this.onDrag(this.position),this.onUp()},addMouseListeners:function(){document.addEventListener("mousemove",this.onMouseMove,!1),document.addEventListener("mouseup",this.onMouseUp,!1)},addTouchListeners:function(){document.addEventListener("touchend",this.onTouchEnd,!1),document.addEventListener("touchmove",this.onTouchMove,!1)},removeMouseListeners:function(){document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp)},removeTouchListeners:function(){document.removeEventListener("touchend",this.onTouchEnd),document.removeEventListener("touchmove",this.onTouchMove)}},window.DragListener=e}(),function(){"use strict";var R,e=new THREE.TextureLoader;e.crossOrigin="",e.load("world/img/world-texture.gif",function(e){R=e,function(){var s=[[43.9096538,12.8399805],[41.8519772,12.2347364],[51.5287718,-.2416791],[55.6713812,12.4537393],[40.6976637,-74.1197623],[19.3911668,-99.4238221],[39.9390731,116.11726],[31.2243084,120.9162376]],t=new THREE.WebGLRenderer({alpha:!0,antialias:!0});t.shadowMap.enabled=!0,t.setSize(window.innerWidth,window.innerHeight);var n=document.querySelector("#canvas");n.appendChild(t.domElement);var o=new THREE.Scene;o.fog=new THREE.FogExp2(0,.1);var i=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,.01,100);i.position.set(0,1,2),i.up=new THREE.Vector3(0,0,-1),i.lookAt(new THREE.Vector3(0,0,0));var e,r=new THREE.AmbientLight(2236962);o.add(r),(e=new THREE.DirectionalLight(14737632,.8)).position.set(0,2,.5),e.castShadow=!0,e.shadowCameraVisible=!0,e.shadowMapWidth=e.shadowMapHeight=2048,o.add(e);var h=new THREE.DirectionalLight(14737632,.4);h.position.set(0,-2,0),o.add(h);var a=new THREE.Vector3(0,0,1);THREE.Euler.prototype.add=function(e){return this.set(this.x+e.x,this.y+e.y,this.z+e.z,this.order),this};var d=new THREE.Euler(0,1.2*Math.PI,0,"XYZ"),c=new THREE.Euler(0,0,0,"XYZ"),u=new THREE.Euler(0,0,0,"XYZ"),E=new THREE.Euler(0,0,0,"XYZ"),l=(g=o,v=d,p=R,m=new THREE.SphereGeometry(.5,32,32),T=new THREE.MeshStandardMaterial({color:"#fff",transparent:!0,opacity:.85,roughness:.65,metalness:.6,map:p}),f=new THREE.Mesh(m,T),f.castShadow=!0,f.receiveShadow=!1,f.rotation.set(v.x,v.y,v.z),g.add(f),f),w=function(e){var t=new THREE.CanvasTexture(function(){var e=document.createElement("canvas");e.width=128,e.height=128;var t=e.getContext("2d"),n=t.createRadialGradient(e.width/2,e.height/2,0,e.width/2,e.height/2,e.width/2);return n.addColorStop(0,"rgba(255,255,255,1)"),n.addColorStop(.2,"rgba(255,255,255,1)"),n.addColorStop(.22,"rgba(255,255,255,.2)"),n.addColorStop(1,"rgba(255,255,255,0)"),t.fillStyle=n,t.fillRect(0,0,e.width,e.height),e}()),o=new THREE.Geometry,n=new THREE.PointsMaterial({size:.07,map:t,vertexColors:THREE.VertexColors,blending:THREE.AdditiveBlending,depthTest:!1,transparent:!0}),i=new THREE.Points(o,n);s.map(function(e){return t=e[0],n=e[1],o=.5,i=(90-t)*(Math.PI/180),s=(n+180)*(Math.PI/180),r=-o*Math.sin(i)*Math.cos(s),h=o*Math.sin(i)*Math.sin(s),a=o*Math.cos(i),new THREE.Vector3(r,a,h);var t,n,o,i,s,r,h,a}).forEach(function(e,t){var n=new THREE.Vector3;n.x=e.x,n.y=e.y,n.z=e.z,o.vertices.push(n),o.colors.push(new THREE.Color(0,0,0))});return o.mergeVertices(),o.verticesNeedUpdate=!0,i.geometry=o,e.add(i),i}(l);var g,v,p,m,T,f;window.addEventListener("resize",y,!1);var M=new DragListener(n,function(e){u.copy(c)},function(e){c.copy(u).add(new THREE.Euler(0,Math.PI*e.strength.x,0,"XYZ")),E.set(0,0,0,"XYZ")},function(e){E.set(0,Math.PI*e.speed.x,0,"XYZ")});function y(){var e={width:0,height:0,aspect:0};e.width=n.offsetWidth,e.height=n.offsetHeight,e.aspect=e.width/e.height,t&&t.setSize(e.width,e.height),i&&(i.aspect=e.aspect,i.updateProjectionMatrix())}function H(e){M.dragging||(d.y+=E.y,E.y+=(.002-E.y)/50),l.rotation.copy(d).add(c),w.geometry.vertices.forEach(function(e,t){var n=l.localToWorld(e.clone()),o=n.distanceTo(a),i=5*Math.max(0,Math.min(1,1-o));w.geometry.colors[t]=new THREE.Color(i,i,i),w.geometry.colorsNeedUpdate=!0}),t.render(o,i)}(function(){var n=new THREE.Clock;function o(e){var t=n.getDelta();H(t),window.requestAnimationFrame(o)}o()})(),y()}()})}();
//# sourceMappingURL=world.min.js.map
