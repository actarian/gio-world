!function(){"use strict";function e(e,t,n,o){this.target=e||document,this.downCallback=t||function(e){console.log("DragListener.downCallback not setted",e)},this.moveCallback=n||function(e){console.log("DragListener.moveCallback not setted",e)},this.upCallback=o||function(e){console.log("DragListener.upCallback not setted",e)},this.dragging=!1,this.init()}e.prototype={init:function(){this.onMouseDown=this.onMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.target.addEventListener("mousedown",this.onMouseDown,!1),this.target.addEventListener("touchstart",this.onTouchStart,!1)},onDown:function(e){this.down=e,this.strength={x:0,y:0},this.distance=this.distance||{x:0,y:0},this.speed={x:0,y:0},this.downCallback(this)},onDrag:function(e){this.dragging=!0;var t=this.target,n={x:e.x-this.down.x,y:e.y-this.down.y},o={x:n.x/window.innerWidth*2,y:n.y/window.innerHeight*2},i={x:this.speed.x+.1*(o.x-this.strength.x),y:this.speed.y+.1*(o.y-this.strength.y)};this.position=e,this.distance=n,this.strength=o,this.speed=i,this.moveCallback({position:e,distance:n,strength:o,speed:i,target:t})},onUp:function(){this.dragging=!1,this.upCallback(this)},onMouseDown:function(e){this.target.removeEventListener("touchstart",this.onTouchStart),this.onDown({x:e.clientX,y:e.clientY}),this.addMouseListeners()},onMouseMove:function(e){this.onDrag({x:e.clientX,y:e.clientY})},onMouseUp:function(e){this.removeMouseListeners(),this.onDrag({x:e.clientX,y:e.clientY}),this.onUp()},onTouchStart:function(e){this.target.removeEventListener("mousedown",this.onMouseDown),1<e.touches.length&&(e.preventDefault(),this.onDown({x:e.touches[0].pageX,y:e.touches[0].pageY}),this.addTouchListeners())},onTouchMove:function(e){0<e.touches.length&&(e.preventDefault(),this.onDrag({x:e.touches[0].pageX,y:e.touches[0].pageY}))},onTouchEnd:function(e){this.removeTouchListeners(),this.onDrag(this.position),this.onUp()},addMouseListeners:function(){document.addEventListener("mousemove",this.onMouseMove,!1),document.addEventListener("mouseup",this.onMouseUp,!1)},addTouchListeners:function(){document.addEventListener("touchend",this.onTouchEnd,!1),document.addEventListener("touchmove",this.onTouchMove,!1)},removeMouseListeners:function(){document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp)},removeTouchListeners:function(){document.removeEventListener("touchend",this.onTouchEnd),document.removeEventListener("touchmove",this.onTouchMove)}},window.DragListener=e}(),function(){"use strict";var C,e=new THREE.TextureLoader;e.crossOrigin="",e.load("world/img/world-texture.gif",function(e){C=e,function(){document.querySelector(".world").setAttribute("class","world init");var s=[[43.9096538,12.8399805],[41.8519772,12.2347364],[51.5287718,-.2416791],[55.6713812,12.4537393],[40.6976637,-74.1197623],[19.3911668,-99.4238221],[39.9390731,116.11726],[31.2243084,120.9162376]],o={x:0,y:0},n={x:0,y:0},t=new THREE.WebGLRenderer({alpha:!0,antialias:!0});t.shadowMap.enabled=!0,t.setSize(window.innerWidth,window.innerHeight);var i=document.querySelector(".world > .title"),r=document.querySelector(".world > .shadow"),a=document.querySelector(".world > .canvas");a.appendChild(t.domElement);var h=new THREE.Scene;h.fog=new THREE.FogExp2(0,.1);var d=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,.01,100);d.position.set(0,1,2),d.up=new THREE.Vector3(0,0,-1),d.lookAt(new THREE.Vector3(0,0,0));var c,e=new THREE.AmbientLight(2236962);h.add(e),(c=new THREE.DirectionalLight(14737632,.8)).position.set(0,2,.5),c.castShadow=!0,c.shadowCameraVisible=!0,c.shadowMapWidth=c.shadowMapHeight=2048,h.add(c);var u=new THREE.DirectionalLight(14737632,.4);u.position.set(0,-2,0),h.add(u);var l=new THREE.Vector3(0,0,1);THREE.Euler.prototype.add=function(e){return this.set(this.x+e.x,this.y+e.y,this.z+e.z,this.order),this};var w=new THREE.Euler(0,1.2*Math.PI,0,"XYZ"),E=new THREE.Euler(0,0,0,"XYZ"),g=new THREE.Euler(0,0,0,"XYZ"),v=new THREE.Euler(0,0,0,"XYZ"),p=(y=h,T=w,f=C,M=new THREE.SphereGeometry(.5,48,48),x=new THREE.MeshStandardMaterial({color:"#fff",transparent:!0,opacity:.85,roughness:.65,metalness:.6,map:f}),H=new THREE.Mesh(M,x),H.castShadow=!0,H.receiveShadow=!1,H.rotation.set(T.x,T.y,T.z),y.add(H),H),m=function(e){var t=new THREE.CanvasTexture(function(){var e=document.createElement("canvas");e.width=128,e.height=128;var t=e.getContext("2d"),n=t.createRadialGradient(e.width/2,e.height/2,0,e.width/2,e.height/2,e.width/2);return n.addColorStop(0,"rgba(255,255,255,1)"),n.addColorStop(.2,"rgba(255,255,255,1)"),n.addColorStop(.22,"rgba(255,255,255,.2)"),n.addColorStop(1,"rgba(255,255,255,0)"),t.fillStyle=n,t.fillRect(0,0,e.width,e.height),e}()),o=new THREE.Geometry,n=new THREE.PointsMaterial({size:.07,map:t,vertexColors:THREE.VertexColors,blending:THREE.AdditiveBlending,depthTest:!1,transparent:!0}),i=new THREE.Points(o,n);s.map(function(e){return t=e[0],n=e[1],o=.5,i=(90-t)*(Math.PI/180),s=(n+180)*(Math.PI/180),r=-o*Math.sin(i)*Math.cos(s),a=o*Math.sin(i)*Math.sin(s),h=o*Math.cos(i),new THREE.Vector3(r,h,a);var t,n,o,i,s,r,a,h}).forEach(function(e,t){var n=new THREE.Vector3;n.x=e.x,n.y=e.y,n.z=e.z,o.vertices.push(n),o.colors.push(new THREE.Color(0,0,0))});return o.mergeVertices(),o.verticesNeedUpdate=!0,i.geometry=o,e.add(i),i}(p);var y,T,f,M,x,H;window.addEventListener("resize",R,!1),document.addEventListener("mousemove",function(e){var t=window.innerWidth/2,n=window.innerHeight/2;o={x:(e.clientX-t)/t,y:(e.clientY-n)/n}},!1);var L=new DragListener(a,function(e){g.copy(E)},function(e){E.copy(g).add(new THREE.Euler(0,Math.PI*e.strength.x,0,"XYZ")),v.set(0,0,0,"XYZ")},function(e){v.set(0,Math.PI*e.speed.x,0,"XYZ")});function R(){var e={width:0,height:0,aspect:0};e.width=a.offsetWidth,e.height=a.offsetHeight,e.aspect=e.width/e.height,t&&t.setSize(e.width,e.height),d&&(d.aspect=e.aspect,d.updateProjectionMatrix())}function b(e){L.dragging||(w.y+=v.y,v.y+=(.002-v.y)/50),p.rotation.copy(w).add(E),m.geometry.vertices.forEach(function(e,t){var n=p.localToWorld(e.clone()),o=n.distanceTo(l),i=5*Math.max(0,Math.min(1,1-o));m.geometry.colors[t]=new THREE.Color(i,i,i),m.geometry.colorsNeedUpdate=!0}),t.render(h,d),function(){n.x+=(o.x-n.x)/8,n.y+=(o.y-n.y)/8;var e={x:.5*-n.x-50,y:.5*-n.y-50};TweenLite.set(i,{transform:"translateX("+e.x+"%) translateY("+e.y+"%)"});var t={x:3*-n.x-50,y:3*-n.y-50};TweenLite.set(r,{transform:"translateX("+t.x+"%) translateY("+t.y+"%)"}),c.position.set(.3*n.x,2+.3*n.y,.5),u.position.set(.3*n.x,.3*n.y-2,0)}()}(function(){var n=new THREE.Clock;function o(e){var t=n.getDelta();b(t),window.requestAnimationFrame(o)}o()})(),R()}()})}();
//# sourceMappingURL=world.min.js.map
